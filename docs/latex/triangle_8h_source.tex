\doxysection{triangle.\+h}
\hypertarget{triangle_8h_source}{}\label{triangle_8h_source}\index{src/triangle.h@{src/triangle.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ TRIANGLE\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ TRIANGLE\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{MACROS_8h}{MACROS.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}matrix.h"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}vector.h"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}triangle.h"{}}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classtriangle}{triangle}}\ \{}
\DoxyCodeLine{00011\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00012\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ vertexes.}}
\DoxyCodeLine{00013\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ A,\ B,\ C;}
\DoxyCodeLine{00014\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtriangle}{triangle}}();}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtriangle}{triangle}}(\mbox{\hyperlink{classvector}{vector<double>}}\ p1,\ \mbox{\hyperlink{classvector}{vector<double>}}\ p2);}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtriangle}{triangle}}(\mbox{\hyperlink{classvector}{vector<double>}}\ p1,\ \mbox{\hyperlink{classvector}{vector<double>}}\ p2,\ \mbox{\hyperlink{classvector}{vector<double>}}\ p3);}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ v1()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ v2()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ v3()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ v1(\mbox{\hyperlink{classvector}{vector<double>}}\ p);}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ v2(\mbox{\hyperlink{classvector}{vector<double>}}\ p);}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ v3(\mbox{\hyperlink{classvector}{vector<double>}}\ p);}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ area()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ perimeter()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ translate(\textcolor{keyword}{const}\ \mbox{\hyperlink{classvector}{vector<double>}}\ translation);}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ transform(\textcolor{keyword}{const}\ \mbox{\hyperlink{classmatrix}{matrix<double>}}\ mat);}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ reset();}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvector}{vector<vector<double>}}>\ vertices()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00044\ \};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ std::ostream\&\ operator<<(std::ostream\&\ out,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classtriangle}{triangle}}\&\ t);}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{comment}{//\ Find\ Angle\ of\ each\ Vertex\ from\ the\ Estimated\ Center\ of\ Points}}
\DoxyCodeLine{00049\ \textcolor{comment}{//\ Sorts\ Points\ Counter\ Clockwise}}
\DoxyCodeLine{00050\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classvector}{vector<vector<double>}}>\ sort\_vertices(\textcolor{keyword}{const}\ \mbox{\hyperlink{classvector}{vector}}<\mbox{\hyperlink{classvector}{vector<double>}}>\&\ vertices)\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \mbox{\hyperlink{classvector}{vector<vector<double>}}>\ sorted(vertices.get\_size());}
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ C\ =\ (vertices[0].get\_size()\ ==\ 3\ ?\ create\_vec3(0,0,1)\ :\ create\_vec2(0,\ 0));}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint64\_t\ i\ =\ 0;\ i\ <\ vertices.get\_size();\ i++)\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ C[0]\ +=\ vertices[i][0];}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ C[1]\ +=\ vertices[i][1];}
\DoxyCodeLine{00057\ \ \ \ \ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ C\ /=\ vertices.\mbox{\hyperlink{classvector_addf346f26993855ec7f15e0e16392a3d}{get\_size}}();}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint64\_t\ i\ =\ 0;\ i\ <\ vertices.get\_size();\ i++)\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ n\ =\ (vertices[i]\ -\/\ C);}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ dist\ =\ \mbox{\hyperlink{MACROS_8h_a5f940c7c73073fd200fb459ce9be4157}{distance}}(n[0],\ n[1],\ 0.0,\ 0.0);}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ angle\ =\ atan2(n[1],\ n[0])\ *\ 180/M\_PI;}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ angle\ +=\ (360\ *\ (angle\ <\ 0));}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ sorted.push\_back(create\_vec3(angle,\ dist,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(i)));}
\DoxyCodeLine{00068\ \ \ \ \ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{//\ Sort\ the\ vector}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ Insertion\ Sort?\ -\/-\/>\ Merge\ Sort\ (TODO)}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint64\_t\ i\ =\ 1;\ i\ <\ sorted.get\_size();\ i++)\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ uint64\_t\ k\ =\ i;}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (k\ >\ 0\ \&\&\ ((sorted[k][0]\ <\ sorted[k-\/1][0])\ ||\ (sorted[k][0]\ ==\ sorted[k-\/1][0]\ \&\&\ sorted[k][1]\ <\ sorted[k-\/1][1])))\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ sorted.swap(k,\ k-\/1);}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ k-\/-\/;}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00078\ \ \ \ \ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint64\_t\ i\ =\ 0;\ i\ <\ sorted.get\_size();\ i++)\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ sorted[i]\ =\ vertices[sorted[i][2]];}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordflow}{return}\ sorted;}
\DoxyCodeLine{00085\ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{comment}{//\ Pre-\/condition:\ Assume\ vertices\ are\ in\ 2D\ space.}}
\DoxyCodeLine{00088\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classvector}{vector<double>}}\ centroid(\mbox{\hyperlink{classvector}{vector}}<\mbox{\hyperlink{classvector}{vector<double>}}>\ vertices)\ \{}
\DoxyCodeLine{00089\ \ \ \ \ vertices\ =\ sort\_vertices(vertices);}
\DoxyCodeLine{00090\ \ \ \ \ int64\_t\ N\ =\ vertices.get\_size();}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//\ A\ is\ the\ polygon's\ signed\ area\ -\/>\ A\ =\ (1/2)\ sum\_\{i=0\}\{n-\/1\}\ [(x\_i\ *\ y\_(i+1))\ -\/\ (x\_(i+1)\ *\ y\_i)]}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{double}\ A\ =\ 0.0,\ Cx\ =\ 0.0,\ Cy\ =\ 0.0;}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint64\_t\ i\ =\ 0;\ i\ <\ N;\ i++)\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ A\ +=\ (vertices[i][0]\ *\ vertices[(i+1)\%N][1])\ -\/\ (vertices[(i+1)\%N][0]\ *\ vertices[i][1]);}
\DoxyCodeLine{00095\ \ \ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ A\ /=\ 2.0;}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ assert(A\ !=\ 0);}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint64\_t\ i\ =\ 0;\ i\ <\ N;\ i++)\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ T\ =\ (vertices[i][0]\ *\ vertices[(i+1)\%N][1]\ -\/\ vertices[(i+1)\%N][0]\ *\ vertices[i][1]);}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ Cx\ +=\ (vertices[i][0]\ +\ vertices[(i+1)\%N][0])\ *\ T;\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ Cy\ +=\ (vertices[i][1]\ +\ vertices[(i+1)\%N][1])\ *\ T;\ }
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ Cx\ /=\ (6*A);}
\DoxyCodeLine{00109\ \ \ \ \ Cy\ /=\ (6*A);}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordflow}{return}\ create\_vec2(Cx,\ Cy);}
\DoxyCodeLine{00112\ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \textcolor{comment}{//\ Computes\ the\ Barycentric\ Coordinates\ of\ a\ Point\ (possibly)\ within\ a\ Triangle\ ABC}}
\DoxyCodeLine{00115\ \textcolor{comment}{//\ alpha\ =\ A(PCB)/A}}
\DoxyCodeLine{00116\ \textcolor{comment}{//\ beta\ =\ A(PCA)/A}}
\DoxyCodeLine{00117\ \textcolor{comment}{//\ gamma\ =\ 1\ -\/\ (alpha\ +\ beta)}}
\DoxyCodeLine{00118\ \textcolor{comment}{//\ We\ use\ the\ cross\ product\ to\ determine\ the\ area\ of\ triangles\ ABC,\ APC,\ APB,\ BPC}}
\DoxyCodeLine{00119\ \textcolor{comment}{//\ which\ are\ then\ used\ to\ determine\ the\ weights\ (alpha,\ beta,\ gamma).}}
\DoxyCodeLine{00120\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classvector}{vector<double>}}\ barycentric(\mbox{\hyperlink{classvector}{vector<double>}}\ p,}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ a,}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ b,}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ c)\ \{}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordflow}{if}\ (p.\mbox{\hyperlink{classvector_addf346f26993855ec7f15e0e16392a3d}{get\_size}}()\ ==\ 2)\ \{\ p\ =\ create\_vec3(p);\ \}}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{if}\ (a.\mbox{\hyperlink{classvector_addf346f26993855ec7f15e0e16392a3d}{get\_size}}()\ ==\ 2)\ \{\ a\ =\ create\_vec3(a);\ \}}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordflow}{if}\ (b.\mbox{\hyperlink{classvector_addf346f26993855ec7f15e0e16392a3d}{get\_size}}()\ ==\ 2)\ \{\ b\ =\ create\_vec3(b);\ \}}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordflow}{if}\ (c.\mbox{\hyperlink{classvector_addf346f26993855ec7f15e0e16392a3d}{get\_size}}()\ ==\ 2)\ \{\ c\ =\ create\_vec3(c);\ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordtype}{double}\ A\ \ \ =\ ((b-\/a).cross(c-\/a).magnitude()),}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ AB\ \ =\ ((a-\/p).cross(b-\/p).magnitude()),}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ AC\ \ =\ ((a-\/p).cross(c-\/p).magnitude()),}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ BC\ \ =\ ((b-\/p).cross(c-\/p).magnitude());}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordtype}{double}\ alpha\ =\ BC/A,\ beta\ =\ AC/A,\ gamma\ =\ 1\ -\/\ (alpha\ +\ beta);}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordflow}{return}\ create\_vec3(alpha,\ beta,\ gamma);}
\DoxyCodeLine{00138\ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ is\_convex\_vertex(\mbox{\hyperlink{classvector}{vector<double>}}\ vA,\ \mbox{\hyperlink{classvector}{vector<double>}}\ vB,\ \mbox{\hyperlink{classvector}{vector<double>}}\ vC)\ \{}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordflow}{return}\ (((vB[0]\ -\/\ vA[0])\ *\ (vC[1]\ -\/\ vB[1]))\ -\/\ ((vC[0]\ -\/\ vB[0])\ *\ (vB[1]\ -\/\ vA[1])))\ >\ 0;}
\DoxyCodeLine{00142\ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ is\_convex\_vertex(\mbox{\hyperlink{classvector}{vector}}<\mbox{\hyperlink{classvector}{vector<double>}}>\&\ vertices,\ int64\_t\ idx)\ \{}
\DoxyCodeLine{00145\ \ \ \ \ assert(idx\ >=\ 0\ \&\&\ idx\ <\ vertices.get\_size());}
\DoxyCodeLine{00146\ \ \ \ \ int64\_t\ N\ =\ vertices.get\_size();}
\DoxyCodeLine{00147\ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ vA\ =\ vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(idx-\/1,\ N)],\ vB\ =\ vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(idx,\ N)],\ vC\ =\ vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(idx+1,\ N)];}
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordflow}{return}\ is\_convex\_vertex(vA,\ vB,\ vC);}
\DoxyCodeLine{00149\ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ is\_ear\_vertex(\mbox{\hyperlink{classvector}{vector}}<\mbox{\hyperlink{classvector}{vector<double>}}>\&\ vertices,\ int64\_t\ idx)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ assert(idx\ >=\ 0\ \&\&\ idx\ <\ vertices.get\_size());}
\DoxyCodeLine{00153\ \ \ \ \ int64\_t\ N\ =\ vertices.get\_size();}
\DoxyCodeLine{00154\ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ vA\ =\ vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(idx-\/1,\ N)],\ vB\ =\ vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(idx,\ N)],\ vC\ =\ vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(idx+1,\ N)];}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordflow}{for}\ (int64\_t\ k\ =\ 0;\ k\ <\ N;\ k++)\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (k\ ==\ \mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(idx-\/1,\ N)\ ||\ k\ ==\ \mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(idx,\ N)\ ||\ k\ ==\ \mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(idx+1,\ N))\ \{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ bc\ =\ barycentric(vertices[k],\ vA,\ vB,\ vC);}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ std::cout\ <<\ bc\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(bc[0]\ \&\&\ bc[1]\ \&\&\ bc[2]))\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00168\ \ \ \ \ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00171\ \}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ update\_polygon\_vertex(\mbox{\hyperlink{classvector}{vector}}<\mbox{\hyperlink{classvector}{vector<double>}}>\&\ vertices,\ \mbox{\hyperlink{classvector}{vector<int64\_t>}}\&\ reflex,\ \mbox{\hyperlink{classvector}{vector<int64\_t>}}\&\ ears,\ int64\_t\ idx)\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_ear\_vertex(vertices,\ idx))\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (reflex.\mbox{\hyperlink{classvector_aa64676bcb038b78ff0b91cff69f23e76}{contains}}(idx))\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ reflex.\mbox{\hyperlink{classvector_aa3ee6ad59948c6c808ce7fd4df3a0fe3}{remove}}(reflex.\mbox{\hyperlink{classvector_a29d19816f51d97aa24b976f6b9ade59c}{index}}(idx));}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ ears.\mbox{\hyperlink{classvector_a8d4c48ae61fa1638962ff9f405a24959}{push\_back}}(idx);}
\DoxyCodeLine{00179\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ears.\mbox{\hyperlink{classvector_aa64676bcb038b78ff0b91cff69f23e76}{contains}}(idx))\ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ ears.\mbox{\hyperlink{classvector_aa3ee6ad59948c6c808ce7fd4df3a0fe3}{remove}}(ears.\mbox{\hyperlink{classvector_a29d19816f51d97aa24b976f6b9ade59c}{index}}(idx));}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00183\ \ \ \ \ \}}
\DoxyCodeLine{00184\ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classvector}{vector<triangle>}}\ triangulate(\mbox{\hyperlink{classvector}{vector}}<\mbox{\hyperlink{classvector}{vector<double>}}>\&\ vertices,\ \mbox{\hyperlink{classvector}{vector<int64\_t>}}\&\ reflex,\ \mbox{\hyperlink{classvector}{vector<int64\_t>}}\&\ ears)\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \mbox{\hyperlink{classvector}{vector<triangle>}}\ out;}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{comment}{//\ If\ the\ set\ of\ vertices\ does\ not\ form\ a\ triangle,\ remove\ an\ ear\ vertex}}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{comment}{//\ and\ update\ the\ status\ of\ it's\ adjacent\ vertices}}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{comment}{//\ \{\ P1,\ P2,\ P3,\ P4,\ P5\ \}\ -\/>\ \{\ P1,\ P2,\ P4,\ P5\ \}}}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{comment}{//\ We\ want\ to\ update\ using\ Angles\ P1-\/P2-\/P4\ and\ P2-\/P4-\/P5}}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{comment}{//\ If\ we\ remove\ index\ N,\ we\ update\ vertexes\ (N-\/1,\ N,\ N+1)\ and\ (N,\ N+1,\ N+2)}}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keywordflow}{while}\ (vertices.get\_size()\ >\ 3)\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ int64\_t\ N\ =\ vertices.\mbox{\hyperlink{classvector_addf346f26993855ec7f15e0e16392a3d}{get\_size}}();}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ int64\_t\ removal\ =\ ears[0];}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classtriangle}{triangle}}\ t\ =\ \mbox{\hyperlink{classtriangle}{triangle}}(vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(removal-\/1,\ N)],}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(removal,\ N)],}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(removal+1,N)]);}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ ears.\mbox{\hyperlink{classvector_aa3ee6ad59948c6c808ce7fd4df3a0fe3}{remove}}(0);}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ vertices.remove(removal);}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int64\_t\ i\ =\ 0;\ i\ <\ ears.\mbox{\hyperlink{classvector_addf346f26993855ec7f15e0e16392a3d}{get\_size}}();\ i++)\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ears[i]\ >\ removal)\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ears[i]-\/-\/;}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (int64\_t\ i\ =\ 0;\ i\ <\ reflex.\mbox{\hyperlink{classvector_addf346f26993855ec7f15e0e16392a3d}{get\_size}}();\ i++)\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (reflex[i]\ >\ removal)\ \{}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ reflex[i]-\/-\/;}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ update\_polygon\_vertex(vertices,\ reflex,\ ears,\ removal);}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ out.\mbox{\hyperlink{classvector_a8d4c48ae61fa1638962ff9f405a24959}{push\_back}}(t);}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ out.\mbox{\hyperlink{classvector_a8d4c48ae61fa1638962ff9f405a24959}{push\_back}}(\mbox{\hyperlink{classtriangle}{triangle}}(vertices[0],\ vertices[1],\ vertices[2]));}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordflow}{return}\ out;}
\DoxyCodeLine{00224\ \}}
\DoxyCodeLine{00225\ }
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classvector}{vector<triangle>}}\ triangulate(\mbox{\hyperlink{classvector}{vector}}<\mbox{\hyperlink{classvector}{vector<double>}}>\ vertices)\ \{}
\DoxyCodeLine{00228\ \ \ \ \ vertices\ =\ sort\_vertices(vertices);}
\DoxyCodeLine{00229\ \ \ \ \ \mbox{\hyperlink{classvector}{vector<int64\_t>}}\ reflex,\ ears;}
\DoxyCodeLine{00230\ \ \ \ \ int64\_t\ N\ =\ vertices.\mbox{\hyperlink{classvector_addf346f26993855ec7f15e0e16392a3d}{get\_size}}();}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{comment}{//\ By\ cosine\ law:\ c\string^2\ =\ a\string^2\ +\ b\string^2\ -\/\ 2*a*b*cos(C)}}
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{comment}{//\ cos(C)\ =\ (a\string^2\ +\ b\string^2\ -\/\ c\string^2)/2*a*b}}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordflow}{for}\ (int64\_t\ i\ =\ 0;\ i\ <\ N;\ i++)\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classvector}{vector<double>}}\ vA\ =\ vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(i-\/1,\ N)],\ vB\ =\ vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(i,\ N)],\ vC\ =\ vertices[\mbox{\hyperlink{MACROS_8h_a8424f6210a6b8990cb5db0d0a07e327b}{mod}}(i+1,\ N)];}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ det(b-\/a,\ c-\/b)\ >\ 0\ -\/-\/>\ vertices\ form\ a\ left\ turn\ -\/>\ implies\ convex}}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (b.x\ -\/\ a.x)\ *\ (c.y\ -\/\ b.y)\ -\/\ (c.x\ -\/\ b.x)\ *\ (b.y\ -\/\ a.y)}}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!is\_convex\_vertex(vertices,\ i))\ \{}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ reflex.\mbox{\hyperlink{classvector_a8d4c48ae61fa1638962ff9f405a24959}{push\_back}}(i);}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_ear\_vertex(vertices,\ i))\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ears.\mbox{\hyperlink{classvector_a8d4c48ae61fa1638962ff9f405a24959}{push\_back}}(i);}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00246\ \ \ \ \ \}}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordflow}{return}\ triangulate(vertices,\ reflex,\ ears);}
\DoxyCodeLine{00249\ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
